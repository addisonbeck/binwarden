#!/usr/bin/env bash

source $HOME/bin/binwarden/sessions/sessions-core

SUPPORTS_BUILDING=true
SUPPORTS_DESTRCUTION=true

PROJECT_NAME="Docker"
PROJECT_PATH="$HOME/bitwarden/server/dev"
SESSION_PREFIX="üõ°Ô∏è"
SESSION_NAME="BW Containers"
DESTROY_COMMAND="cd $PROJECT_PATH/dev; docker compose down -v --remove-orphans --rmi all ${COMPOSEPROFILENAME}; docker network prune -f"

if [ $RUN_BUILD ]
then
  if [ ! "$(docker ps | grep $CONTAINERNAME)" ];
  then
    touch $HOME/bitwarden/logs/${LOGFILENAME}
    RUN_COMMAND="cd $PROJECT_PATH; docker compose --profile ${COMPOSEPROFILENAME} up"
  fi
fi

ensure_repo_cloned server
ensure_command_installed docker
